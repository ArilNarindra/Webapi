<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KUNA BOT Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkbg: '#050B14',
                        carddark: '#0B1623',
                        inputdark: '#121E2E',
                        primary: '#4F46E5',
                    }
                }
            }
        }
    </script>
    <style>
        .console-scroll::-webkit-scrollbar { width: 6px; }
        .console-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        .console-text { font-family: 'Courier New', Courier, monospace; }
    </style>
</head>
<body class="bg-gray-100 dark:bg-darkbg text-gray-800 dark:text-gray-200 min-h-screen font-sans transition-colors duration-300 pb-20">

    <div id="view-create" class="p-4 flex flex-col items-center justify-center min-h-[80vh]">
        <h1 class="text-2xl font-bold mb-6 w-full max-w-md">Create a New Bot</h1>
        
        <div class="bg-white dark:bg-carddark w-full max-w-md rounded-xl p-6 shadow-lg border border-gray-200 dark:border-gray-800">
            <form id="botForm" class="space-y-4">
                
                <div>
                    <label class="text-xs text-gray-500 ml-1 mb-1 block">Nama Bot</label>
                    <input type="text" id="inputName" placeholder="e.g., My Awesome Bot" required
                           class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-inputdark focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="text-xs text-gray-500 ml-1 mb-1 block">Nomor Bot</label>
                    <input type="number" id="inputNumber" placeholder="e.g., 6281234567890" required
                           class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-inputdark focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <div>
                    <label class="text-xs text-gray-500 ml-1 mb-1 block">Nomor Admin</label>
                    <input type="number" id="inputAdminNumber" placeholder="e.g., 6281234567890" required
                           class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-inputdark focus:outline-none focus:ring-2 focus:ring-primary">
                </div>

                <div class="flex gap-3 mt-6">
                    <button type="button" onclick="createNewBot()" class="w-full py-3 rounded-lg font-semibold bg-primary text-white hover:bg-indigo-600 transition shadow-lg shadow-indigo-500/30">
                        Create
                    </button>
                    <button type="button" class="w-full py-3 rounded-lg font-semibold bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="view-list" class="hidden p-4 max-w-md mx-auto mt-6">
        <h1 class="text-2xl font-bold mb-6">Your Bots</h1>
        <div id="botListContainer" class="space-y-4">
            <div class="text-center text-gray-500 mt-10">Belum ada bot. Silakan buat baru.</div>
        </div>
    </div>

    <div id="view-console" class="hidden p-4 max-w-md mx-auto">
        <div class="flex items-center justify-between mb-4">
            <button onclick="switchTab('list')" class="text-sm text-gray-500 hover:text-primary">← Back</button>
            <span class="text-xs bg-yellow-600 text-white px-2 py-1 rounded">NEEDS-RESTART</span>
        </div>

        <h1 id="consoleTitle" class="text-2xl font-bold uppercase mb-1"></h1>
        <p class="text-xs text-gray-500 mb-4">ID: <span id="consoleId"></span> • Admin: <span id="consoleAdmin"></span></p>

        <div class="flex gap-2 mb-4">
            <button class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-medium shadow-lg shadow-green-900/20">Start</button>
            <button class="flex-1 bg-cyan-600 hover:bg-cyan-700 text-white py-2 rounded-lg text-sm font-medium shadow-lg shadow-cyan-900/20">Restart</button>
            <button class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white py-2 rounded-lg text-sm font-medium shadow-lg shadow-indigo-900/20">Edit</button>
            <button class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm font-medium shadow-lg shadow-red-900/20">Reset</button>
        </div>

        <div class="bg-yellow-900/20 border border-yellow-600/50 p-3 rounded-lg mb-4">
            <div class="flex items-center gap-2 text-yellow-500 font-bold text-sm mb-1">
                <span class="w-2 h-2 rounded-full bg-yellow-500"></span> Session Error
            </div>
            <p class="text-xs text-yellow-200/70">Perangkat keluar, silakan Reset Session untuk masuk kembali.</p>
        </div>

        <div class="bg-[#030712] border border-gray-800 rounded-lg p-4 h-80 overflow-y-auto console-scroll font-mono text-xs leading-relaxed shadow-inner">
            <div class="flex items-center gap-2 mb-2 border-b border-gray-800 pb-2">
                <span class="flex gap-1">
                    <span class="w-2 h-2 rounded-full bg-red-500"></span>
                    <span class="w-2 h-2 rounded-full bg-yellow-500"></span>
                    <span class="w-2 h-2 rounded-full bg-green-500"></span>
                </span>
                <span class="text-gray-500 ml-auto">LIVE • <span id="consoleBotNameLive"></span></span>
            </div>
            <div id="terminalContent" class="space-y-1"></div>
        </div>
    </div>


    <div class="fixed bottom-0 left-0 w-full bg-white dark:bg-[#050B14] border-t border-gray-200 dark:border-gray-800 p-2 pb-4 flex justify-around z-50 shadow-[0_-5px_10px_rgba(0,0,0,0.1)]">
        <button id="navCreate" onclick="switchTab('create')" class="flex flex-col items-center justify-center w-16 text-gray-400 hover:text-primary focus:text-primary transition group">
            <div class="text-2xl mb-1 group-focus:scale-110 transition">+</div>
            <span class="text-[10px] font-medium">Create</span>
        </button>
        <button id="navList" onclick="switchTab('list')" class="flex flex-col items-center justify-center w-16 text-gray-400 hover:text-primary focus:text-primary transition group">
            <div class="text-xl font-bold mb-1 group-focus:scale-110 transition">K</div>
            <span class="text-[10px] font-medium">My Bots</span>
        </button>
        <button id="navTheme" onclick="toggleTheme()" class="flex flex-col items-center justify-center w-16 text-gray-400 hover:text-yellow-400 focus:text-yellow-400 transition group">
            <div class="text-xl mb-1 group-focus:rotate-45 transition">☀</div>
            <span class="text-[10px] font-medium">Thema</span>
        </button>
    </div>

    <script>
        let bots = JSON.parse(localStorage.getItem('kunaBots')) || [];

        function saveToLocal() {
            localStorage.setItem('kunaBots', JSON.stringify(bots));
        }

        function createNewBot() {
            const name = document.getElementById('inputName').value;
            const number = document.getElementById('inputNumber').value;
            const adminNumber = document.getElementById('inputAdminNumber').value;

            if(!name || !number || !adminNumber) {
                alert("Mohon isi Nama Bot, Nomor Bot, dan Nomor Admin!");
                return;
            }

            const newBot = {
                id: Math.floor(Math.random() * 90000000000) + 10000000000, 
                name: name,
                number: number,
                adminNumber: adminNumber,
                status: 'Offline'
            };
            bots.push(newBot);
            saveToLocal();

            document.getElementById('botForm').reset();
            renderBotList();
            switchTab('list');
        }

        function renderBotList() {
            const container = document.getElementById('botListContainer');
            container.innerHTML = ""; 

            if (bots.length === 0) {
                container.innerHTML = `<div class="text-center text-gray-500 mt-10 p-4 border border-dashed border-gray-600 rounded-lg">Belum ada bot.<br>Klik menu '+' untuk membuat.</div>`;
                return;
            }

            bots.forEach(bot => {
                const el = document.createElement('div');
                el.className = "bg-white dark:bg-carddark border border-gray-200 dark:border-gray-700 p-4 rounded-xl shadow-sm flex justify-between items-center cursor-pointer hover:border-primary transition";
                el.onclick = () => openConsole(bot);
                
                el.innerHTML = `
                    <div>
                        <h3 class="font-bold text-lg dark:text-white">${bot.name}</h3>
                        <p class="text-xs text-gray-500">ID: ${bot.id} • Admin: ${bot.adminNumber}</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full ${bot.status === 'Online' ? 'bg-green-500' : 'bg-red-500'}"></span>
                        <span class="text-xs font-mono text-gray-400">></span>
                    </div>
                `;
                container.appendChild(el);
            });
        }

        function openConsole(bot) {
            document.getElementById('consoleTitle').innerText = bot.name.toUpperCase();
            document.getElementById('consoleId').innerText = bot.id;
            document.getElementById('consoleAdmin').innerText = bot.adminNumber;
            document.getElementById('consoleBotNameLive').innerText = bot.name.toUpperCase();
            
            const logs = document.getElementById('terminalContent');
            logs.innerHTML = `
                <div class="text-gray-400">> command loaded!</div>
                <div class="text-gray-300">> Loading bot session : <span class="text-blue-400">${bot.name.toUpperCase()}</span></div>
                <div class="text-gray-400 animate-pulse">> Menyambungkan, harap tunggu...</div>
                <div class="text-green-400">> Pairing code for ${bot.number}</div>
                <div class="text-gray-500 italic">> Code Pairing: J4DIB0T5</div>
                <div class="text-red-400 mt-2">> Error: Connection closed.</div>
            `;

            switchTab('console');
        }

        let currentTab = 'create';
        function switchTab(tabName) {
            currentTab = tabName;
            document.getElementById('view-create').classList.add('hidden');
            document.getElementById('view-list').classList.add('hidden');
            document.getElementById('view-console').classList.add('hidden');

            document.getElementById('navCreate').classList.remove('text-primary');
            document.getElementById('navCreate').classList.add('text-gray-400');
            document.getElementById('navList').classList.remove('text-primary');
            document.getElementById('navList').classList.add('text-gray-400');

            if(tabName === 'create') {
                document.getElementById('view-create').classList.remove('hidden');
                document.getElementById('navCreate').classList.add('text-primary');
                document.getElementById('navCreate').classList.remove('text-gray-400');
            } else if (tabName === 'list') {
                renderBotList(); 
                document.getElementById('view-list').classList.remove('hidden');
                document.getElementById('navList').classList.add('text-primary');
                document.getElementById('navList').classList.remove('text-gray-400');
            } else if (tabName === 'console') {
                document.getElementById('view-console').classList.remove('hidden');
            }
        }

        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderBotList(); 
            if (bots.length > 0) {
                switchTab('list');
            } else {
                switchTab('create');
            }
        });
    </script>
</body>
</html>
